<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - African Fashion</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: #f9fafb;
            line-height: 1.6;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Step Indicator */
        .step-indicator {
            width: 100%;
            padding: 30px 0;
            margin-bottom: 30px;
        }

        .steps-container {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .step {
            display: flex;
            align-items: center;
            position: relative;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #d1d5db;
            background-color: #f3f4f6;
            color: #6b7280;
            font-weight: bold;
            transition: all 0.3s;
        }

        .step.active .step-circle {
            background-color: #3b82f6;
            border-color: #3b82f6;
            color: white;
        }

        .step.completed .step-circle {
            background-color: #10b981;
            border-color: #10b981;
            color: white;
        }

        .step-label {
            margin-left: 10px;
            font-weight: 500;
            color: #6b7280;
        }

        .step.active .step-label {
            color: #3b82f6;
        }

        .step.completed .step-label {
            color: #10b981;
        }

        .step-connector {
            width: 60px;
            height: 2px;
            background-color: #d1d5db;
            margin: 0 15px;
        }

        .step.completed + .step .step-connector {
            background-color: #10b981;
        }

        /* Main Layout */
        .checkout-layout {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        @media (max-width: 768px) {
            .checkout-layout {
                grid-template-columns: 1fr;
            }
        }

        /* Form Sections */
        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
        }

        .form-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 24px;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 20px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: 500;
            color: #374151;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            background-color: white;
            font-size: 16px;
        }

        /* Order Items */
        .order-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 20px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .order-item:last-child {
            border-bottom: none;
        }

        .item-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
            background-color: #f3f4f6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #9ca3af;
        }

        .item-details {
            flex: 1;
        }

        .item-name {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 5px;
        }

        .item-info {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 3px;
        }

        .item-customizations {
            margin-top: 8px;
        }

        .customization-list {
            list-style: none;
            padding-left: 15px;
        }

        .customization-list li {
            font-size: 13px;
            color: #6b7280;
            position: relative;
        }

        .customization-list li:before {
            content: "•";
            color: #3b82f6;
            font-weight: bold;
            position: absolute;
            left: -15px;
        }

        .item-price {
            text-align: right;
        }

        .price-amount {
            font-weight: 600;
            color: #1f2937;
        }

        .production-time {
            font-size: 12px;
            color: #6b7280;
        }

        /* Measurement Form */
        .measurement-guide {
            background-color: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .guide-title {
            font-weight: 600;
            color: #92400e;
            margin-bottom: 8px;
        }

        .guide-text {
            font-size: 14px;
            color: #92400e;
        }

        .measurement-unit {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .radio-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .measurement-input {
            position: relative;
        }

        .measurement-desc {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 5px;
        }

        /* Payment Options */
        .payment-option {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-option:hover {
            background-color: #f9fafb;
        }

        .payment-option.selected {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }

        .payment-header {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .payment-title {
            font-weight: 500;
            color: #1f2937;
        }

        .payment-desc {
            font-size: 14px;
            color: #6b7280;
            margin-top: 5px;
        }

        /* Order Summary Sidebar */
        .order-summary {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .summary-title {
            font-size: 18px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 20px;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .summary-total {
            display: flex;
            justify-content: space-between;
            font-size: 18px;
            font-weight: 600;
            padding-top: 15px;
            border-top: 2px solid #e5e7eb;
            margin-top: 15px;
        }

        .summary-footer {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e5e7eb;
            font-size: 12px;
            color: #6b7280;
        }

        .summary-footer p {
            margin-bottom: 8px;
        }

        /* Navigation Buttons */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 15px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background-color: #3b82f6;
            color: white;
        }

        .btn-primary:hover {
            background-color: #2563eb;
        }

        .btn-secondary {
            background-color: #e5e7eb;
            color: #374151;
        }

        .btn-secondary:hover {
            background-color: #d1d5db;
        }

        .btn-success {
            background-color: #10b981;
            color: white;
            font-size: 18px;
            padding: 15px 30px;
        }

        .btn-success:hover {
            background-color: #059669;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Process Info */
        .process-info {
            background-color: #eff6ff;
            border: 1px solid #3b82f6;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .process-title {
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 10px;
        }

        .process-steps {
            list-style: none;
            color: #1e40af;
        }

        .process-steps li {
            font-size: 14px;
            margin-bottom: 5px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .form-section {
                padding: 20px;
            }

            .steps-container {
                flex-direction: column;
            }

            .step-connector {
                display: none;
            }

            .navigation-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Step Indicator -->
        <div class="step-indicator">
            <div class="steps-container">
                <div class="step active" data-step="1">
                    <div class="step-circle">1</div>
                    <div class="step-label">Review Order</div>
                </div>
                <div class="step-connector"></div>
                <div class="step" data-step="2">
                    <div class="step-circle">2</div>
                    <div class="step-label">Customer Info</div>
                </div>
                <div class="step-connector"></div>
                <div class="step" data-step="3">
                    <div class="step-circle">3</div>
                    <div class="step-label">Measurements</div>
                </div>
                <div class="step-connector"></div>
                <div class="step" data-step="4">
                    <div class="step-circle">4</div>
                    <div class="step-label">Shipping</div>
                </div>
                <div class="step-connector"></div>
                <div class="step" data-step="5">
                    <div class="step-circle">5</div>
                    <div class="step-label">Payment</div>
                </div>
            </div>
        </div>

        <div class="checkout-layout">
            <!-- Main Content -->
            <div class="main-content">
                <!-- Step 1: Order Review -->
                <div class="step-content active" id="step-1">
                    <div class="form-section">
                        <h2 class="section-title">Review Your Order</h2>
                        
                        <div id="order-items">
                            <div class="order-item">
                                <div class="item-image">📷</div>
                                <div class="item-details">
                                    <div class="item-name">Traditional Ankara Dress</div>
                                    <div class="item-info">Style Code: TD-001</div>
                                    <div class="item-info">Fabric: Ankara Print #APK-003 (Blue/Gold)</div>
                                    <div class="item-customizations">
                                        <div class="item-info">Customizations:</div>
                                        <ul class="customization-list">
                                            <li>Long sleeves</li>
                                            <li>V-neck</li>
                                            <li>Midi length</li>
                                            <li>Side pockets</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="item-price">
                                    <div class="price-amount">GHS 250</div>
                                    <div class="production-time">3-4 weeks</div>
                                </div>
                            </div>
                            
                            <div class="order-item">
                                <div class="item-image">📷</div>
                                <div class="item-details">
                                    <div class="item-name">Kente Kaftan</div>
                                    <div class="item-info">Style Code: KK-005</div>
                                    <div class="item-info">Fabric: Kente Cloth #KT-002 (Multi-color)</div>
                                    <div class="item-customizations">
                                        <div class="item-info">Customizations:</div>
                                        <ul class="customization-list">
                                            <li>Traditional collar</li>
                                            <li>Full length</li>
                                            <li>Embroidered trim</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="item-price">
                                    <div class="price-amount">GHS 180</div>
                                    <div class="production-time">3-4 weeks</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Customer Information -->
                <div class="step-content" id="step-2">
                    <div class="form-section">
                        <h2 class="section-title">Customer Information</h2>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">First Name *</label>
                                <input type="text" class="form-input" id="firstName" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Last Name *</label>
                                <input type="text" class="form-input" id="lastName" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Email Address *</label>
                                <input type="email" class="form-input" id="email" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Phone Number *</label>
                                <input type="tel" class="form-input" id="phone" placeholder="+233 XX XXX XXXX" required>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Measurements -->
                <div class="step-content" id="step-3">
                    <div class="form-section">
                        <h2 class="section-title">Your Measurements</h2>
                        
                        <div class="measurement-guide">
                            <div class="guide-title">📏 How to Measure</div>
                            <div class="guide-text">
                                For best results, have someone help you measure. Use a soft measuring tape and wear fitted clothing. 
                                All measurements should be taken snugly but not tight.
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Measurement Unit</label>
                            <div class="measurement-unit">
                                <div class="radio-group">
                                    <input type="radio" id="inches" name="unit" value="inches" checked>
                                    <label for="inches">Inches</label>
                                </div>
                                <div class="radio-group">
                                    <input type="radio" id="cm" name="unit" value="cm">
                                    <label for="cm">Centimeters</label>
                                </div>
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Bust/Chest *</label>
                                <div class="measurement-desc">Around the fullest part</div>
                                <input type="number" class="form-input" id="bust" step="0.5" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Waist *</label>
                                <div class="measurement-desc">Around the narrowest part</div>
                                <input type="number" class="form-input" id="waist" step="0.5" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Hips *</label>
                                <div class="measurement-desc">Around the fullest part</div>
                                <input type="number" class="form-input" id="hips" step="0.5" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Shoulder Width *</label>
                                <div class="measurement-desc">From shoulder to shoulder</div>
                                <input type="number" class="form-input" id="shoulderWidth" step="0.5" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Arm Length *</label>
                                <div class="measurement-desc">From shoulder to wrist</div>
                                <input type="number" class="form-input" id="armLength" step="0.5" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Dress Length *</label>
                                <div class="measurement-desc">From shoulder to desired hem</div>
                                <input type="number" class="form-input" id="dressLength" step="0.5" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Neck Circumference *</label>
                                <div class="measurement-desc">Around the base of neck</div>
                                <input type="number" class="form-input" id="neckCircumference" step="0.5" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Special Instructions</label>
                            <textarea class="form-input form-textarea" id="specialInstructions" 
                                placeholder="Any special requests or fit preferences..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Shipping -->
                <div class="step-content" id="step-4">
                    <div class="form-section">
                        <h2 class="section-title">Shipping Information</h2>
                        
                        <div class="form-group">
                            <label class="form-label">Delivery Address *</label>
                            <textarea class="form-input form-textarea" id="address" 
                                placeholder="Enter your full delivery address..." required></textarea>
                        </div>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">City *</label>
                                <input type="text" class="form-input" id="city" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Region *</label>
                                <select class="form-select" id="region" required>
                                    <option value="">Select Region</option>
                                    <option value="Greater Accra">Greater Accra</option>
                                    <option value="Ashanti">Ashanti</option>
                                    <option value="Western">Western</option>
                                    <option value="Eastern">Eastern</option>
                                    <option value="Central">Central</option>
                                    <option value="Northern">Northern</option>
                                    <option value="Upper East">Upper East</option>
                                    <option value="Upper West">Upper West</option>
                                    <option value="Volta">Volta</option>
                                    <option value="Brong Ahafo">Brong Ahafo</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Delivery Method</label>
                            <div class="payment-option" data-delivery="standard">
                                <div class="payment-header">
                                    <input type="radio" name="delivery" value="standard" checked>
                                    <div>
                                        <div class="payment-title">Standard Delivery - GHS 10</div>
                                        <div class="payment-desc">5-7 business days after completion</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="payment-option" data-delivery="express">
                                <div class="payment-header">
                                    <input type="radio" name="delivery" value="express">
                                    <div>
                                        <div class="payment-title">Express Delivery - GHS 25</div>
                                        <div class="payment-desc">1-2 business days after completion</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 5: Payment -->
                <div class="step-content" id="step-5">
                    <div class="form-section">
                        <h2 class="section-title">Payment Information</h2>
                        
                        <div class="form-group">
                            <label class="form-label">Payment Method</label>
                            
                            <div class="payment-option selected" data-payment="mobile_money">
                                <div class="payment-header">
                                    <input type="radio" name="payment" value="mobile_money" checked>
                                    <div>
                                        <div class="payment-title">Mobile Money</div>
                                        <div class="payment-desc">MTN, Vodafone, AirtelTigo</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="payment-option" data-payment="bank_transfer">
                                <div class="payment-header">
                                    <input type="radio" name="payment" value="bank_transfer">
                                    <div>
                                        <div class="payment-title">Bank Transfer</div>
                                        <div class="payment-desc">Direct bank transfer</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="payment-option" data-payment="cash_on_delivery">
                                <div class="payment-header">
                                    <input type="radio" name="payment" value="cash_on_delivery">
                                    <div>
                                        <div class="payment-title">Cash on Delivery</div>
                                        <div class="payment-desc">Pay when you receive your order</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group" id="mobile-money-field">
                            <label class="form-label">Mobile Money Number</label>
                            <input type="tel" class="form-input" id="mobileNumber" placeholder="+233 XX XXX XXXX">
                        </div>

                        <div class="process-info">
                            <div class="process-title">📋 Order Process</div>
                            <ol class="process-steps">
                                <li>1. Order confirmation email sent</li>
                                <li>2. Production begins (3-4 weeks)</li>
                                <li>3. Quality check and completion</li>
                                <li>4. Delivery to your address</li>
                            </ol>
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="navigation-buttons">
                    <button class="btn btn-secondary" id="prevBtn" onclick="changeStep(-1)" style="display: none;">Previous</button>
                    <button class="btn btn-primary" id="nextBtn" onclick="changeStep(1)">Continue</button>
                    <button class="btn btn-success" id="submitBtn" onclick="submitOrder()" style="display: none;">Place Order</button>
                </div>
            </div>

            <!-- Order Summary Sidebar -->
            <div class="order-summary">
                <h3 class="summary-title">Order Summary</h3>
                
                <div class="summary-item">
                    <span>Traditional Ankara Dress</span>
                    <span>GHS 250</span>
                </div>
                
                <div class="summary-item">
                    <span>Kente Kaftan</span>
                    <span>GHS 180</span>
                </div>
                
                <div class="summary-item">
                    <span>Subtotal:</span>
                    <span>GHS <span id="subtotal">430</span></span>
                </div>
                
                <div class="summary-item">
                    <span>Delivery:</span>
                    <span>GHS <span id="delivery-fee">10</span></span>
                </div>
                
                <div class="summary-total">
                    <span>Total:</span>
                    <span>GHS <span id="total">440</span></span>
                </div>

                <div class="summary-footer">
                    <p>🔒 Secure checkout</p>
                    <p>📞 Customer support: +233 XX XXX XXXX</p>
                    <p>⏱️ Production time: 3-4 weeks</p>
                </div>
            </div>
        </div>
    </div>

  <script>
      let currentStep = 1;
const totalSteps = 5;

// Initialize
document.addEventListener('DOMContentLoaded', function() {
    updateStepIndicator();
    setupEventListeners();
    updateOrderSummary();
});

// Setup all event listeners
function setupEventListeners() {
    // Payment method selection
    const paymentOptions = document.querySelectorAll('[data-payment]');
    paymentOptions.forEach(option => {
        option.addEventListener('click', function() {
            selectPaymentOption(this);
        });
    });

    // Delivery method selection
    const deliveryOptions = document.querySelectorAll('[data-delivery]');
    deliveryOptions.forEach(option => {
        option.addEventListener('click', function() {
            selectDeliveryOption(this);
        });
    });

    // Form validation on input
    const requiredInputs = document.querySelectorAll('input[required], select[required], textarea[required]');
    requiredInputs.forEach(input => {
        input.addEventListener('blur', validateField);
        input.addEventListener('input', clearFieldError);
    });

    // Auto-format phone numbers
    const phoneInputs = document.querySelectorAll('input[type="tel"]');
    phoneInputs.forEach(input => {
        input.addEventListener('input', formatPhoneNumber);
    });
}

// Step navigation
function changeStep(direction) {
    if (direction === 1) {
        // Validate current step before proceeding
        if (!validateCurrentStep()) {
            return;
        }
        
        if (currentStep < totalSteps) {
            currentStep++;
        }
    } else if (direction === -1) {
        if (currentStep > 1) {
            currentStep--;
        }
    }
    
    updateStepDisplay();
    updateStepIndicator();
    updateNavigationButtons();
    scrollToTop();
}

// Update step display
function updateStepDisplay() {
    // Hide all step contents
    const stepContents = document.querySelectorAll('.step-content');
    stepContents.forEach(content => {
        content.classList.remove('active');
    });
    
    // Show current step
    const currentStepContent = document.getElementById(`step-${currentStep}`);
    if (currentStepContent) {
        currentStepContent.classList.add('active');
    }
}

// Update step indicator
function updateStepIndicator() {
    const steps = document.querySelectorAll('.step');
    
    steps.forEach((step, index) => {
        const stepNumber = index + 1;
        
        step.classList.remove('active', 'completed');
        
        if (stepNumber === currentStep) {
            step.classList.add('active');
        } else if (stepNumber < currentStep) {
            step.classList.add('completed');
            // Add checkmark for completed steps
            const circle = step.querySelector('.step-circle');
            circle.innerHTML = '✓';
        } else {
            // Reset number for future steps
            const circle = step.querySelector('.step-circle');
            circle.innerHTML = stepNumber;
        }
    });
}

// Update navigation buttons
function updateNavigationButtons() {
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const submitBtn = document.getElementById('submitBtn');
    
    // Show/hide previous button
    prevBtn.style.display = currentStep > 1 ? 'inline-block' : 'none';
    
    // Show/hide next and submit buttons
    if (currentStep === totalSteps) {
        nextBtn.style.display = 'none';
        submitBtn.style.display = 'inline-block';
    } else {
        nextBtn.style.display = 'inline-block';
        submitBtn.style.display = 'none';
    }
}

// Validate current step
function validateCurrentStep() {
    const currentStepElement = document.getElementById(`step-${currentStep}`);
    const requiredFields = currentStepElement.querySelectorAll('input[required], select[required], textarea[required]');
    
    let isValid = true;
    
    requiredFields.forEach(field => {
        if (!validateField({ target: field })) {
            isValid = false;
        }
    });
    
    return isValid;
}

// Validate individual field
function validateField(event) {
    const field = event.target;
    const value = field.value.trim();
    
    // Remove existing error styling
    field.classList.remove('error');
    removeFieldError(field);
    
    // Check if required field is empty
    if (field.hasAttribute('required') && !value) {
        showFieldError(field, 'This field is required');
        return false;
    }
    
    // Email validation
    if (field.type === 'email' && value) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(value)) {
            showFieldError(field, 'Please enter a valid email address');
            return false;
        }
    }
    
    // Phone validation
    if (field.type === 'tel' && value) {
        const phoneRegex = /^\+233\s\d{2}\s\d{3}\s\d{4}$/;
        if (!phoneRegex.test(value)) {
            showFieldError(field, 'Please enter a valid Ghana phone number (+233 XX XXX XXXX)');
            return false;
        }
    }
    
    // Number validation for measurements
    if (field.type === 'number' && value) {
        const numValue = parseFloat(value);
        if (isNaN(numValue) || numValue <= 0) {
            showFieldError(field, 'Please enter a valid positive number');
            return false;
        }
    }
    
    return true;
}

// Show field error
function showFieldError(field, message) {
    field.classList.add('error');
    
    // Create error message element
    const errorDiv = document.createElement('div');
    errorDiv.className = 'field-error';
    errorDiv.textContent = message;
    errorDiv.style.color = '#ef4444';
    errorDiv.style.fontSize = '12px';
    errorDiv.style.marginTop = '4px';
    
    // Insert error message after the field
    field.parentNode.appendChild(errorDiv);
}

// Remove field error
function removeFieldError(field) {
    const errorDiv = field.parentNode.querySelector('.field-error');
    if (errorDiv) {
        errorDiv.remove();
    }
}

// Clear field error on input
function clearFieldError(event) {
    const field = event.target;
    field.classList.remove('error');
    removeFieldError(field);
}

// Format phone number
function formatPhoneNumber(event) {
    const field = event.target;
    let value = field.value.replace(/\D/g, ''); // Remove non-digits
    
    // Add country code if not present
    if (value.length > 0 && !value.startsWith('233')) {
        value = '233' + value;
    }
    
    // Format: +233 XX XXX XXXX
    if (value.length >= 3) {
        let formatted = '+233';
        if (value.length > 3) {
            formatted += ' ' + value.substring(3, 5);
        }
        if (value.length > 5) {
            formatted += ' ' + value.substring(5, 8);
        }
        if (value.length > 8) {
            formatted += ' ' + value.substring(8, 12);
        }
        field.value = formatted;
    }
}

// Select payment option
function selectPaymentOption(selectedOption) {
    // Remove selected class from all options
    document.querySelectorAll('[data-payment]').forEach(option => {
        option.classList.remove('selected');
        const radio = option.querySelector('input[type="radio"]');
        radio.checked = false;
    });
    
    // Add selected class to clicked option
    selectedOption.classList.add('selected');
    const radio = selectedOption.querySelector('input[type="radio"]');
    radio.checked = true;
    
    // Show/hide mobile money field
    const mobileMoneyField = document.getElementById('mobile-money-field');
    const paymentType = selectedOption.getAttribute('data-payment');
    
    if (paymentType === 'mobile_money') {
        mobileMoneyField.style.display = 'block';
        document.getElementById('mobileNumber').setAttribute('required', '');
    } else {
        mobileMoneyField.style.display = 'none';
        document.getElementById('mobileNumber').removeAttribute('required');
    }
}

// Select delivery option
function selectDeliveryOption(selectedOption) {
    // Remove selected class from all options
    document.querySelectorAll('[data-delivery]').forEach(option => {
        option.classList.remove('selected');
        const radio = option.querySelector('input[type="radio"]');
        radio.checked = false;
    });
    
    // Add selected class to clicked option
    selectedOption.classList.add('selected');
    const radio = selectedOption.querySelector('input[type="radio"]');
    radio.checked = true;
    
    // Update delivery fee
    updateOrderSummary();
}

// Update order summary
function updateOrderSummary() {
    const subtotal = 430; // Base subtotal from items
    let deliveryFee = 10; // Default standard delivery
    
    // Check selected delivery method
    const selectedDelivery = document.querySelector('[data-delivery].selected');
    if (selectedDelivery) {
        const deliveryType = selectedDelivery.getAttribute('data-delivery');
        deliveryFee = deliveryType === 'express' ? 25 : 10;
    }
    
    const total = subtotal + deliveryFee;
    
    // Update display
    document.getElementById('delivery-fee').textContent = deliveryFee;
    document.getElementById('total').textContent = total;
}

// Submit order
async function submitOrder() {
    if (!validateCurrentStep()) {
        return;
    }
    
    // Show loading state
    const submitBtn = document.getElementById('submitBtn');
    const originalText = submitBtn.textContent;
    submitBtn.textContent = 'Processing...';
    submitBtn.disabled = true;
    
    try {
        // Collect all form data
        const orderData = collectFormData();
        
        // Simulate API call
        await new Promise(resolve => setTimeout(resolve, 2000));
        
        // Generate order number
        const orderNumber = generateOrderNumber();
        document.getElementById('orderNumber').textContent = `Order #${orderNumber}`;
        
        // Show success step
        showSuccessStep();
        
        // Send confirmation email (simulated)
        console.log('Order submitted:', orderData);
        
    } catch (error) {
        console.error('Order submission failed:', error);
        alert('There was an error processing your order. Please try again.');
        
        // Reset button
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
    }
}

// Collect all form data
function collectFormData() {
    const data = {
        customer: {
            firstName: document.getElementById('firstName').value,
            lastName: document.getElementById('lastName').value,
            email: document.getElementById('email').value,
            phone: document.getElementById('phone').value
        },
        measurements: {
            unit: document.querySelector('input[name="unit"]:checked').value,
            bust: document.getElementById('bust').value,
            waist: document.getElementById('waist').value,
            hips: document.getElementById('hips').value,
            shoulderWidth: document.getElementById('shoulderWidth').value,
            armLength: document.getElementById('armLength').value,
            dressLength: document.getElementById('dressLength').value,
            neckCircumference: document.getElementById('neckCircumference').value,
            specialInstructions: document.getElementById('specialInstructions').value
        },
        shipping: {
            address: document.getElementById('address').value,
            city: document.getElementById('city').value,
            region: document.getElementById('region').value,
            method: document.querySelector('input[name="delivery"]:checked').value
        },
        payment: {
            method: document.querySelector('input[name="payment"]:checked').value,
            mobileNumber: document.getElementById('mobileNumber').value
        },
        items: [
            {
                name: 'Traditional Ankara Dress',
                code: 'TD-001',
                price: 250,
                customizations: ['Long sleeves', 'V-neck', 'Midi length', 'Side pockets']
            },
            {
                name: 'Kente Kaftan',
                code: 'KK-005',
                price: 180,
                customizations: ['Traditional collar', 'Full length', 'Embroidered trim']
            }
        ],
        orderDate: new Date().toISOString(),
        total: parseInt(document.getElementById('total').textContent)
    };
    
    return data;
}

// Generate order number
function generateOrderNumber() {
    const now = new Date();
    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const day = String(now.getDate()).padStart(2, '0');
    const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
    
    return `AF-${year}${month}${day}-${random}`;
}

// Show success step
function showSuccessStep() {
    // Hide all step contents
    document.querySelectorAll('.step-content').forEach(content => {
        content.classList.remove('active');
    });
    
    // Show success step
    document.getElementById('step-success').style.display = 'block';
    document.getElementById('step-success').classList.add('active');
    
    // Hide navigation buttons
    document.querySelector('.navigation-buttons').style.display = 'none';
    
    // Update step indicator to show all completed
    const steps = document.querySelectorAll('.step');
    steps.forEach(step => {
        step.classList.remove('active');
        step.classList.add('completed');
        const circle = step.querySelector('.step-circle');
        circle.innerHTML = '✓';
    });
    
    scrollToTop();
}

// Scroll to top of page
function scrollToTop() {
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
}

// Add CSS for error styling
const style = document.createElement('style');
style.textContent = `
    .form-input.error {
        border-color: #ef4444;
        box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
    }
    
    .field-error {
        color: #ef4444;
        font-size: 12px;
        margin-top: 4px;
    }
    
    .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
`;
document.head.appendChild(style);
  </script>